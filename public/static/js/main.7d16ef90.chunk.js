(this.webpackJsonptaskmanager=this.webpackJsonptaskmanager||[]).push([[0],{239:function(e,t,s){},240:function(e,t,s){},329:function(e,t){},331:function(e,t){},341:function(e,t){},343:function(e,t){},370:function(e,t){},372:function(e,t){},373:function(e,t){},378:function(e,t){},380:function(e,t){},386:function(e,t){},388:function(e,t){},407:function(e,t){},419:function(e,t){},422:function(e,t){},465:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s.n(a),r=s(28),c=s.n(r),i=(s(233),s(234),s(235),s(236),s(237),s(238),s(239),s(240),s(18)),o=s(86),l=s(4),d="TASKS_LOADING",p="ADD_TASKS",u="TASKS_FAILED",j="POST_TASK_SUCCESS",h="POST_TASK_FAILED",b="PUT_TASK_SUCCESS",m="PUT_TASK_FAILED",g="DELETE_TASK_SUCCESS",O="DELETE_TASK_FAILED",f="CHANGE_FILTER_TYPE",x="CHANGE_SORT_TYPE",y="CHANGE_ORDER_TYPE",k="COMMENTS_LOADING",v="ADD_COMMENTS",S="COMMENTS_FAILED",C="POST_NEW_CMT_SUCCESS",N="LABELS_LOADING",L="ADD_LABELS",T="LABELS_FAILED",M="POST_NEW_LABEL_SUCCESS",I="POST_NEW_LABEL_FAILED",E="PROJECTS_LOADING",D="ADD_PROJECTS",A="PROJECTS_FAILED",w="POST_NEW_PROJECT_SUCCESS",P="POST_NEW_PROJECT_FAILED",B="REGISTER_LOADING",_="REGISTER_SUCCESS",F="REGISTER_FAILED",R="LOGIN_LOADING",Y="LOGIN_SUCCESS",U="LOGIN_FAILED",G="LOGOUT_SUCCESS",z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMsg:null,successMsg:null,tasks:[],filter:0,sort:"dueDate",order:"desc"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,errMsg:null,tasks:[]});case p:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,tasks:t.payload});case u:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload});case j:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:t.payload});case h:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});case b:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:t.payload});case m:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});case g:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:t.payload});case O:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});case f:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:null,filter:t.payload});case x:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:null,sort:t.payload});case y:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:null,order:t.payload});default:return e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMsg:null,successMsg:null,comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,errMsg:null,comments:[],successMsg:null});case v:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,comments:t.payload});case S:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});case C:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:t.payload});default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMsg:null,labels:[],successMsg:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,errMsg:null,labels:[],successMsg:null});case L:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,labels:t.payload,successMsg:null});case T:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});case M:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:t.payload});case I:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMsg:null,projects:[],successMsg:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,errMsg:null,projects:[],successMsg:null});case D:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,projects:t.payload,successMsg:null});case A:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});case w:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:null,successMsg:t.payload});case P:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,errMsg:t.payload,successMsg:null});default:return e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isLoggedIn:!1,isRegisterLoading:!1,isRegisterSuccess:!1,registerErr:null,user:null,errMsg:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0,isLoggedIn:!1,user:null,errMsg:null});case Y:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isLoggedIn:!0,user:t.payload,errMsg:null});case U:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isLoggedIn:!1,user:null,errMsg:t.payload});case G:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1,isLoggedIn:!1,user:null,errMsg:null});case B:return Object(l.a)(Object(l.a)({},e),{},{isRegisterLoading:!0,isRegisterSuccess:!1,registerErr:null});case _:return Object(l.a)(Object(l.a)({},e),{},{isRegisterLoading:!1,isRegisterSuccess:!0,registerErr:null});case F:return Object(l.a)(Object(l.a)({},e),{},{isRegisterLoading:!1,isRegisterSuccess:!1,registerErr:t.payload});default:return e}},q=s(220),Q=s(221),V=s.n(Q),X=Object(o.c)(Object(o.b)({tasks:z,comments:J,labels:K,projects:W,auth:H}),Object(o.a)(q.a,V.a)),Z=s(47),$=s(19),ee=s(20),te=s(22),se=s(21),ae=s(14),ne=s(471),re=s(469),ce=s(470),ie=s(473),oe=s(474),le=s(475),de=s(476),pe=s(224),ue=s(84),je=s(468),he=s(493),be=s(1);var me=function(e){return Object(be.jsxs)(a.Fragment,{children:[Object(be.jsx)("span",{className:"badge bg-primary me-1",id:e.target,children:e.badge}),Object(be.jsx)(he.a,{placement:"top",isOpen:e.tooltip,target:e.target,toggle:e.toggleTooltip,children:e.badgeType})]})},ge=s(9),Oe=s.n(ge);var fe=function(e){var t=e.task,s=e.taskLabel,n=e.taskProject,r=e.cmtCount,c=e.changeComplete,o=Object(a.useState)(!1),d=Object(ue.a)(o,2),p=d[0],u=d[1],j=Object(a.useState)(!1),h=Object(ue.a)(j,2),b=h[0],m=h[1],g=Object(a.useState)(!1),O=Object(ue.a)(g,2),f=O[0],x=O[1];return Object(be.jsxs)("div",{className:"mt-2 my-bg-light",children:[Object(be.jsx)(je.a,{value:t.progress,color:"primary",className:"my-progress-bar"}),Object(be.jsxs)("div",{className:"p-3",children:[Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ce.a,{xs:"10",children:Object(be.jsx)(i.b,{to:{pathname:"/tasks/".concat(t.id),state:{prev:"/home"}},className:"my-link",children:Object(be.jsx)("h5",{children:t.title})})}),Object(be.jsx)(ce.a,{children:Object(be.jsx)(ne.a,{type:"checkbox",name:"completeTask",id:"completeTask",checked:t.isComplete,onChange:function(e){c(Object(l.a)(Object(l.a)({},t),{},{isComplete:!t.isComplete}))}})})]}),Object(be.jsx)(me,{tooltip:p,target:"priority",badge:t.priority,badgeType:"Priority",toggleTooltip:function(){u(!p)}}),t.label&&Object(be.jsx)(me,{tooltip:b,target:"label",badge:s,badgeType:"Label",toggleTooltip:function(){m(!b)}}),t.project&&Object(be.jsx)(me,{tooltip:f,target:"project",badge:n,badgeType:"Project",toggleTooltip:function(){x(!f)}}),Object(be.jsxs)("div",{className:"mt-3 mb-2",children:[Object(be.jsxs)("span",{children:[Object(be.jsx)("i",{className:"fa fa-calendar"})," ",Oe()(t.dueDate).format("MMM Do YY")," "]}),Object(be.jsxs)("span",{children:[Object(be.jsx)("i",{className:"fa fa-comment"})," ",r]})]})]})]})},xe=s(472),ye=function(){return Object(be.jsxs)("div",{className:"text-center",children:[Object(be.jsx)(xe.a,{style:{width:"3rem",height:"3rem"},type:"grow",color:"primary"}),Object(be.jsx)("h4",{children:"Loading..."})]})};var ke=function(e){var t=e.msg,s=e.type;return"error"===s?Object(be.jsx)("p",{className:"alert alert-danger col-sm-8 mx-auto",children:t}):"success"===s?Object(be.jsx)("p",{className:"alert alert-success col-sm-8 mx-auto",children:t}):void 0},ve=s(25),Se=s(85),Ce=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"handleChange",value:function(e){"filter"===e.target.name?this.props.changeFilter(+e.target.value):this.props.changeSort(e.target.value)}},{key:"render",value:function(){var e=this;if(!this.props.auth.isLoggedIn)return Object(be.jsx)(ve.a,{to:"/login"});var t=Object(Se.a)(this.props.tasks.tasks.filter((function(e){return Oe()(e.dueDate).isAfter(Oe()(Oe()(),"days"))})),{by:this.props.tasks.sort,order:this.props.tasks.order}),s=Object(Se.a)(this.props.tasks.tasks.filter((function(e){return Oe()(e.dueDate).isBefore(Oe()(Oe()(),"days"))})),{by:this.props.tasks.sort,order:this.props.tasks.order}),n=Object(Se.a)(this.props.tasks.tasks.filter((function(e){return"true"===e.isComplete})),{by:this.props.tasks.sort,order:this.props.tasks.order}),r={};switch(this.props.tasks.filter){case 1:r.tasks=t.filter((function(e){return Oe()(e.dueDate).isSame(Oe()(Oe()().add(1,"days")),"day")})),r.filterType="Tomorrow";break;case 2:r.tasks=t.filter((function(e){return Oe()(e.dueDate).isSameOrAfter(Oe()(),"day")&&Oe()(e.dueDate).isBefore(Oe()().endOf("isoWeek"))})),r.filterType="This week";break;case 3:r.tasks=t.filter((function(e){return Oe()(e.dueDate).isSame(Oe()(),"month")})),r.filterType="To do in "+Oe()().format("MMMM");break;case 4:r.tasks=t.filter((function(e){return Oe()(e.dueDate).isSame(Oe()(Oe()().add(1,"month")),"month")})),r.filterType="To do in "+Oe()().add(1,"month").format("MMMM");break;case 5:r.tasks=n,r.filterType="Completed Tasks";break;case 6:r.tasks=s,r.filterType="Dued Tasks";break;default:r.tasks=t.filter((function(e){return Oe()(e.dueDate).isSame(Oe()(),"day")})),r.filterType="Today"}return Object(be.jsxs)(a.Fragment,{children:[this.props.isLoading&&Object(be.jsx)(ye,{}),this.props.errMsg&&Object(be.jsx)(ke,{msg:this.props.errMsg,type:"error"}),this.props.successMsg&&Object(be.jsx)(ke,{msg:this.props.successMsg,type:"success"}),!this.props.isLoading&&!this.props.errMsg&&Object(be.jsxs)(a.Fragment,{children:[Object(be.jsxs)("div",{className:"mb-2 d-flex justify-content-between",children:[Object(be.jsx)("i",{className:"fa fa-refresh bg-circle",onClick:function(){return e.props.fetchTasks(e.props.auth.user.id)}}),Object(be.jsx)(ne.a,{type:"select",name:"filter",id:"filter",className:"form-select ms-0 ms-md-auto filter-input",value:this.props.tasks.filter,onChange:this.handleChange,children:[{id:0,title:"Today"},{id:1,title:"Tomorrow"},{id:2,title:"This week"},{id:3,title:"To do in ".concat(Oe()().format("MMMM"))},{id:4,title:"To do in ".concat(Oe()().add(1,"month").format("MMMM"))},{id:5,title:"Completed Tasks"},{id:6,title:"Due Tasks"}].map((function(e,t){return Object(be.jsx)("option",{value:e.id,children:e.title},t)}))})]}),Object(be.jsx)(re.a,{children:Object(be.jsx)(ce.a,{lg:{size:12},children:Object(be.jsx)(ie.a,{children:Object(be.jsxs)(oe.a,{children:[Object(be.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(be.jsxs)("div",{children:[Object(be.jsx)(ne.a,{type:"select",name:"sort",id:"sort",className:"form-select d-inline me-3",style:{width:"8em",cursor:"pointer"},value:this.props.tasks.sort,onChange:this.handleChange,children:[{val:"dueDate",text:"Date"},{val:"progress",text:"Progress"},{val:"priority",text:"Priority"}].map((function(e,t){return Object(be.jsx)("option",{value:e.val,children:e.text},t)}))}),Object(be.jsx)("i",{id:"order",className:"bg-circle fa fa-sort-".concat(this.props.tasks.order),onClick:function(){"bg-circle fa fa-sort-desc"===document.getElementById("order").className&&e.props.changeSortOrder("asc"),"bg-circle fa fa-sort-asc"===document.getElementById("order").className&&e.props.changeSortOrder("desc")}})]}),Object(be.jsxs)(le.a,{tag:"h5",className:"align-self-end",children:[Object(be.jsxs)("span",{className:"d-none d-sm-inline",children:[r.filterType," - "]}),r.tasks.length," ","task",r.tasks.length>1?"s":""]})]}),Object(be.jsx)("hr",{className:"mb-0"}),Object(be.jsx)(de.a,{type:"unstyled",className:"my-task-list",children:this.props.comments.isLoading||this.props.comments.errMsg||this.props.labels.isLoading||this.props.labels.errMsg||this.props.projects.isLoading||this.props.projects.errMsg||this.props.isLoading||this.props.errMsg||!(r.tasks.length>0)?Object(be.jsx)("span",{children:"No tasks available!"}):r.tasks.map((function(t){return Object(be.jsx)(fe,{task:t,taskLabel:t.label,taskProject:t.project,cmtCount:e.props.comments.comments.filter((function(e){return e.taskId===t.id})).length,changeComplete:e.props.changeComplete,auth:e.props.auth},t.id)}))})]})})})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(ce.a,{sm:12,className:"text-center mt-3 d-grid d-sm-inline",children:Object(be.jsx)(i.b,{to:"/tasks",className:"my-link",children:Object(be.jsx)(pe.a,{color:"outline-primary",size:"md",children:"See All"})})})})]})]})}}]),s}(n.a.Component),Ne=s(477),Le=s(478),Te=s(479),Me=s(480),Ie=s(494),Ee=s(495),De=s(481),Ae=s(482),we=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).state={isOpen:!1},a.toggle=a.toggle.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return Object(be.jsxs)(Ne.a,{color:"primary",expand:"md",className:"fixed-top px-5",children:[Object(be.jsx)(i.c,{to:"/home",className:"nav-link text-white",style:{fontSize:"20px"},children:"To Do List"}),Object(be.jsx)(Le.a,{onClick:this.toggle}),Object(be.jsxs)(Te.a,{isOpen:this.state.isOpen,navbar:!0,children:[Object(be.jsxs)(Me.a,{className:"me-auto my-navbar",navbar:!0,children:[Object(be.jsx)(i.c,{to:"/tasks",className:"nav-link",children:"All Tasks"}),Object(be.jsxs)(Ie.a,{nav:!0,inNavbar:!0,children:[Object(be.jsx)(Ee.a,{nav:!0,caret:!0,children:"Options"}),Object(be.jsx)(De.a,{className:"drop-options",children:Object(be.jsx)(i.b,{to:"/projects",className:"drop-link",children:Object(be.jsx)(Ae.a,{children:"Projects & Labels"})})})]})]}),Object(be.jsx)(Me.a,{className:"my-navbar",children:Object(be.jsxs)(Ie.a,{nav:!0,inNavbar:!0,children:[Object(be.jsx)(Ee.a,{nav:!0,caret:!0,className:"px-0",children:this.props.auth.isLoggedIn?this.props.auth.user.email:Object(be.jsx)("i",{className:"fa fa-user"})}),Object(be.jsxs)(De.a,{className:this.props.auth.isLoggedIn?"":"my-nav-dropitems",children:[!this.props.auth.isLoggedIn&&Object(be.jsxs)(n.a.Fragment,{children:[Object(be.jsx)(i.b,{to:"/login",className:"drop-link",children:Object(be.jsx)(Ae.a,{children:"Login"})}),Object(be.jsx)(i.b,{to:"/register",className:"drop-link",children:Object(be.jsx)(Ae.a,{children:"Register"})})]}),this.props.auth.isLoggedIn&&Object(be.jsxs)(n.a.Fragment,{children:[Object(be.jsx)(i.b,{to:"/profile",className:"drop-link",children:Object(be.jsx)(Ae.a,{children:"Profile"})}),Object(be.jsx)(Ae.a,{divider:!0}),Object(be.jsx)(i.b,{to:"/logout",className:"drop-link",children:Object(be.jsx)(Ae.a,{children:"Logout"})})]})]})]})})]})]})}}]),s}(n.a.Component),Pe=Object(ve.g)(we),Be=s(33),_e=s(490),Fe=s(491),Re=s(492),Ye=s(483);var Ue=function(e){return Object(be.jsxs)(Ye.a,{isOpen:e.toastOpen,className:"bg-light my-toast",children:[Object(be.jsxs)(re.a,{className:"bg-warning mt-0 mx-0 py-2 px-1",children:[Object(be.jsx)(ce.a,{xs:10,children:Object(be.jsx)("h6",{className:"text-white",children:"Be careful! "})}),Object(be.jsx)(ce.a,{xs:2,children:Object(be.jsx)(pe.a,{className:"bg-light btn-close",onClick:e.toggleToast})})]}),Object(be.jsx)(re.a,{className:"px-3 pt-3",children:Object(be.jsxs)("p",{children:["Are you sure to delete"," ",Object(be.jsx)("strong",{children:e.selected&&e.selected.title})," ?"]})}),Object(be.jsxs)("div",{className:"text-end pb-3 pe-3",children:[Object(be.jsx)(pe.a,{color:"light",size:"sm",onClick:e.toggleToast,children:"cancel"}),Object(be.jsx)(pe.a,{color:"info",size:"sm",onClick:function(){e.deleteTask(e.selected.id,e.auth.user.id),e.toggleToast()},children:"Yes"})]})]})},Ge=s(484),ze=s(496),Je=s(485),Ke=s(486),We=s(487),He=s(488),qe=s(489),Qe=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(){var e;Object($.a)(this,s);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderRadios=function(){return Object(be.jsx)("div",{children:[1,2,3,4,5].map((function(t){return Object(be.jsxs)(a.Fragment,{children:[Object(be.jsx)(Ge.a,{for:"p".concat(t),children:t}),Object(be.jsx)(ne.a,{type:"radio",name:"priority",id:"p".concat(t),className:"ms-1 me-3",value:t,defaultChecked:e.props.task.priority===t,onChange:e.props.handleInputChange})]},t)}))})},e}return Object(ee.a)(s,[{key:"render",value:function(){var e=this,t=this.props.task&&this.props.comments.comments.filter((function(t){return t.taskId===e.props.task.id}));return Object(be.jsxs)(ze.a,{isOpen:this.props.isOpen,toggle:function(){return e.props.toggle()},className:"modal-lg",children:[Object(be.jsxs)("div",{className:"modal-header",children:[Object(be.jsx)("h5",{className:"modal-title",children:"Add New Task"}),Object(be.jsx)("button",{className:"btn-close",type:"button",onClick:function(){return e.props.toggle()}})]}),Object(be.jsx)(Je.a,{children:Object(be.jsxs)(Ke.a,{id:"my-form",onSubmit:this.props.handleSubmit,children:[Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(Ge.a,{for:"title",sm:2,children:"Title (Req.)"}),Object(be.jsxs)(ce.a,{sm:10,children:[Object(be.jsx)(ne.a,{type:"text",name:"title",placeholder:"Task Title",valid:""===this.props.errors.title,invalid:""!==this.props.errors.title,onBlur:this.props.handleBlur("title"),value:this.props.task.title,onChange:this.props.handleInputChange}),Object(be.jsx)(He.a,{children:this.props.errors.title})]})]}),Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(Ge.a,{for:"project",sm:2,children:"Project"}),Object(be.jsx)(ce.a,{sm:10,children:Object(be.jsxs)(ne.a,{type:"select",name:"project",id:"project",className:"form-select",value:this.props.task.project,onChange:this.props.handleInputChange,children:[1111===this.props.task.project&&Object(be.jsx)("option",{value:"1111",disabled:!0,children:"Project not chosen"}),this.props.projects.projects.map((function(e,t){return Object(be.jsx)("option",{value:e.id,children:e.title},t)})),this.props.projects.projects.length<1&&Object(be.jsx)("option",{disabled:!0,selected:!0,children:"No projects availabe - create first"})]})})]}),Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(Ge.a,{for:"label",sm:2,children:"Label"}),Object(be.jsx)(ce.a,{sm:10,children:Object(be.jsxs)(ne.a,{type:"select",name:"label",id:"label",className:"form-select",value:this.props.task.label,onChange:this.props.handleInputChange,children:[1111===this.props.task.label&&Object(be.jsx)("option",{value:"1111",disabled:!0,children:"Label not chosen"}),this.props.labels.labels.map((function(e,t){return Object(be.jsx)("option",{value:e.id,children:e.text},t)})),this.props.labels.labels.length<1&&Object(be.jsx)("option",{disabled:!0,selected:!0,children:"No labels availabe - create first"})]})})]}),Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(ce.a,{sm:2,children:Object(be.jsx)(Ge.a,{children:"Priority"})}),Object(be.jsx)(ce.a,{children:this.renderRadios()})]}),Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(Ge.a,{for:"dueDate",sm:2,children:"Due (Date Req.)"}),Object(be.jsxs)(ce.a,{sm:4,className:"mt-3 mt-sm-0",children:[Object(be.jsx)(ne.a,{type:"date",name:"dueDate",id:"dueDate",min:Oe()().format("YYYY-MM-DD"),valid:""===this.props.errors.dueDate,invalid:""!==this.props.errors.dueDate,onBlur:this.props.handleBlur("dueDate"),value:this.props.task.dueDate,onChange:this.props.handleInputChange}),Object(be.jsx)(He.a,{children:this.props.errors.dueDate})]})]}),this.props.task.editing&&Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(ce.a,{sm:"2",children:Object(be.jsx)(Ge.a,{for:"progress",children:"Progress"})}),Object(be.jsx)(ce.a,{sm:"8",children:Object(be.jsx)(ne.a,{type:"range",className:"form-range",id:"progress",name:"progress",value:this.props.task.progress,onChange:this.props.handleInputChange})}),Object(be.jsx)(ce.a,{sm:"2",className:"text-end",children:Object(be.jsxs)("strong",{children:[this.props.task.progress,"%"]})})]}),Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(Ge.a,{for:"comment",sm:2,children:"Comment"}),Object(be.jsx)(ce.a,{sm:10,children:Object(be.jsx)(ne.a,{type:"textarea",name:"comment",id:"comment",rows:"6",value:this.props.task.comment,onChange:this.props.handleInputChange})})]}),this.props.task.comments.length>0&&Object(be.jsxs)(a.Fragment,{children:[Object(be.jsx)("hr",{}),Object(be.jsx)("h6",{children:"Previous Comments"}),Xe(t,{edit:!0,deleteComment:function(t){e.props.deleteComment(t),e.props.toggle()}})]})]})}),Object(be.jsxs)(qe.a,{children:[Object(be.jsx)(pe.a,{className:"btn btn-danger",onClick:function(){return e.props.toggle()},children:"Cancel"}),Object(be.jsx)(pe.a,{className:"btn btn-primary",type:"submit",form:"my-form",onClick:function(){return e.props.toggle()},disabled:this.props.errors.btn,children:"Save"})]})]})}}]),s}(n.a.Component),Ve=Object(Z.b)((function(e){return{comments:e.comments,labels:e.labels,projects:e.projects}}))(Qe),Xe=function(e,t){return Object(be.jsx)(de.a,{type:"unstyled",className:"my-comment-list",children:e.map((function(e,s){return Object(be.jsxs)("li",{className:"d-block",children:[Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ce.a,{xs:"10",children:Object(be.jsx)("p",{className:"p-3 my-comment d-inline-block mb-0",children:e.text})}),Object(be.jsx)(ce.a,{xs:"2",className:"align-self-center",children:t&&t.edit&&Object(be.jsx)("i",{className:"fa fa-trash btn",onClick:function(){return t.deleteComment(e.id)}})})]}),Object(be.jsxs)("code",{className:"d-block mt-0 mb-4 ms-1",children:[Oe()(e.date).calendar(),";"]})]},s)}))})},Ze=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).handleBlur=function(e){return function(t){a.setState({blur:Object(l.a)(Object(l.a)({},a.state.blur),{},Object(Be.a)({},e,!0))})}},a.state={prev:a.props.history.location.state&&a.props.history.location.state.prev,toastOpen:!1,isOpen:!1,editing:!0,title:"",project:"",label:"",priority:1,dueDate:Oe()(Oe()().add(1,"days")).format("YYYY-MM-DD"),dueTime:"",progress:0,comments:[],comment:"",blur:{title:!1,dueDate:!1},isDeleting:!1},a.toggleToast=a.toggleToast.bind(Object(ae.a)(a)),a.toggle=a.toggle.bind(Object(ae.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(ae.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(ae.a)(a)),a.handleBlur=a.handleBlur.bind(Object(ae.a)(a)),a.validate=a.validate.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"toggleToast",value:function(){this.setState({toastOpen:!this.state.toastOpen})}},{key:"toggle",value:function(e){var t=this,s=this.props.task;e?(s.label=this.props.labels.labels.filter((function(e){return e.text===s.label}))[0]?this.props.labels.labels.filter((function(e){return e.text===s.label}))[0].id:1111,s.project=this.props.projects.projects.filter((function(e){return e.title===s.project}))[0]?this.props.projects.projects.filter((function(e){return e.title===s.project}))[0].id:1111,this.setState(Object(l.a)(Object(l.a)(Object(l.a)({},this.state),s),{},{isOpen:!this.state.isOpen}))):(s.label=this.props.labels.labels.filter((function(e){return e.id===+t.state.label}))[0]?this.props.labels.labels.filter((function(e){return e.id===+t.state.label}))[0].text:"Label not chosen",s.project=this.props.projects.projects.filter((function(e){return e.id===+t.state.project}))[0]?this.props.projects.projects.filter((function(e){return e.id===+t.state.project}))[0].title:"Project not chosen",this.setState(Object(l.a)(Object(l.a)(Object(l.a)({},this.state),this.props.newTask),{},{isOpen:!this.state.isOpen})))}},{key:"handleInputChange",value:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value,s=e.target.name;this.setState(Object(Be.a)({},s,t))}},{key:"validate",value:function(){var e={title:"",dueDate:"",btn:!1};return this.state.blur.title&&this.state.title.length<3&&(e.title="Too short! Title should contain at least 3 letters"),this.state.blur.title&&this.state.title.length>80&&(e.title="Too long! Give a short and descriptive title"),this.state.blur.title&&!this.state.title&&(e.title="Please enter a task title"),e.title&&(e.btn=!0),this.state.blur.dueDate&&!this.state.dueDate&&(e.dueDate="Please enter a due date!"),this.state.title&&this.state.dueDate||(e.btn=!0),e}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.putTask(this.state.id,this.state)}},{key:"render",value:function(){var e=this,t=this.props.task,s=this.validate();if(this.props.auth.isLoggedIn){if(t){var n=t&&this.props.comments.comments.filter((function(e){return e.taskId===t.id}));return t.comments=n,Object(be.jsxs)(a.Fragment,{children:[this.props.isLoading&&Object(be.jsx)(ye,{}),this.props.errMsg&&Object(be.jsx)(ke,{msg:this.props.errMsg,type:"error"}),this.props.successMsg&&Object(be.jsx)(ke,{msg:this.props.successMsg,type:"success"}),this.props.comments.successMsg&&Object(be.jsx)(ke,{msg:this.props.comments.successMsg,type:"success"}),this.props.comments.errMsg&&Object(be.jsx)(ke,{msg:this.props.comments.errMsg,type:"error"}),Object(be.jsx)(Ue,{toastOpen:this.state.toastOpen,toggleToast:this.toggleToast,selected:t,auth:this.props.auth,deleteTask:this.props.deleteTask}),Object(be.jsx)(Ve,{isOpen:this.state.isOpen,toggle:this.toggle,task:Object(l.a)({},this.state),handleInputChange:this.handleInputChange,handleSubmit:this.handleSubmit,handleBlur:this.handleBlur,errors:s,validate:this.validate,deleteComment:this.props.deleteComment}),Object(be.jsxs)(re.a,{children:[this.state.prev&&Object(be.jsx)(ce.a,{lg:8,className:"mx-auto",children:Object(be.jsxs)(_e.a,{className:"my-breadcrumb",children:[Object(be.jsxs)(Fe.a,{children:[this.state.prev&&"/home"===this.state.prev&&Object(be.jsx)(i.b,{to:"/home",children:"Home"}),this.state.prev&&"/tasks"===this.state.prev&&Object(be.jsx)(i.b,{to:{pathname:"/tasks"},children:"Tasks"})]}),Object(be.jsx)(Fe.a,{active:!0,children:t.title})]})}),Object(be.jsx)(ce.a,{lg:8,className:"mx-auto",children:Object(be.jsx)(ie.a,{children:Object(be.jsxs)(oe.a,{children:[Object(be.jsxs)(le.a,{tag:"h5",className:"my-3",children:[Object(be.jsx)(ne.a,{type:"checkbox",name:"completeTask",id:"completeTask",className:"me-3",checked:this.props.task.isComplete,onChange:function(t){e.props.changeComplete(Object(l.a)(Object(l.a)({},e.props.task),{},{isComplete:!e.props.task.isComplete}))}}),t.title]}),Object(be.jsxs)(Re.a,{tag:"h6",className:"my-3",children:[Object(be.jsxs)("span",{className:"badge bg-primary me-1",children:["Priority-",this.props.task.priority]}),this.props.task.label&&Object(be.jsxs)("span",{className:"badge bg-primary me-1",children:["Label-",this.props.task.label]}),this.props.task.project&&Object(be.jsxs)("span",{className:"badge bg-primary me-1",children:["Project-",this.props.task.project]})]}),Object(be.jsxs)(re.a,{className:"my-3",children:[Object(be.jsxs)(ce.a,{md:5,className:"mb-2",children:[Object(be.jsxs)("span",{children:[Object(be.jsx)("i",{className:"fa fa-calendar"})," ",Oe()(this.props.task.dueDate).format("MMM Do YY")," "]}),Object(be.jsxs)("span",{children:[Object(be.jsx)("i",{className:"fa fa-comment"})," ",n.length]})]}),Object(be.jsxs)(ce.a,{md:{size:5,offset:2},className:"text-sm-end",children:[Object(be.jsx)(pe.a,{color:"primary",size:"sm",onClick:function(){return e.toggle(!0)},children:Object(be.jsx)("i",{className:"fa fa-pencil"})}),Object(be.jsx)(pe.a,{className:"ms-1",color:"danger",size:"sm",onClick:function(){e.toggleToast()},children:Object(be.jsx)("i",{className:"fa fa-trash"})})]})]}),Object(be.jsx)("hr",{}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)("h6",{children:"Comments"}),Xe(n)]})]})})})]})]})}return Object(be.jsx)(ve.a,{to:"/home"})}return Object(be.jsx)(ve.a,{to:"/login"})}}]),s}(n.a.Component),$e=Object(Z.b)((function(e){return{comments:e.comments}}))(Ze),et=s(227),tt=s(225),st=s.n(tt),at=s(128),nt=s.n(at),rt=s(226),ct=s.n(rt),it=at.Search.SearchBar,ot=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).state={toastOpen:!1,selected:[],toDelete:null},a.handleOnSelect=a.handleOnSelect.bind(Object(ae.a)(a)),a.handleOnSelectAll=a.handleOnSelectAll.bind(Object(ae.a)(a)),a.toggleToast=a.toggleToast.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"handleOnSelect",value:function(e,t){t?this.props.changeComplete(Object(l.a)(Object(l.a)({},e),{},{isComplete:!0})):this.props.changeComplete(Object(l.a)(Object(l.a)({},e),{},{isComplete:!1}))}},{key:"handleOnSelectAll",value:function(e,t){e?this.props.changeCompleteAll(t,this.props.auth.user.id,!0):this.props.changeCompleteAll(t,this.props.auth.user.id,!1)}},{key:"toggleToast",value:function(e){this.setState({toDelete:e,toastOpen:!this.state.toastOpen})}},{key:"render",value:function(){var e=this,t={mode:"checkbox",clickToSelect:!1,style:{backgroundColor:"#F8F9FA"},onSelect:this.handleOnSelect,onSelectAll:this.handleOnSelectAll,selected:Object(et.a)(this.props.tasks.filter((function(e){return!0===e.isComplete})).map((function(e){return e.id})))},s=[{dataField:"title",text:"Title",formatter:function(e,t){return Object(be.jsxs)("span",{children:[Object(be.jsx)(i.b,{to:{pathname:"/tasks/".concat(t.id),state:{prev:"/tasks"}},children:t.title}),t.isComplete?Object(be.jsx)("span",{style:{color:"white",backgroundColor:"tomato",padding:"4px",borderRadius:"3px",marginLeft:"5px"},children:"completed"}):Oe()(t.dueDate).isBefore(Oe()())?Object(be.jsx)("span",{style:{color:"white",backgroundColor:"tomato",padding:"4px",borderRadius:"3px",marginLeft:"5px"},children:"dued"}):""]})}},{dataField:"project",text:"Project",sort:!0},{dataField:"dueDate",text:"Due Date",sort:!0,headerStyle:function(e,t){return{width:"100px",textAlign:"center"}},formatter:function(e,t){return Object(be.jsx)("span",{children:Oe()(t.dueDate).format("MMM Do YY")})}},{dataField:"priority",text:"Priority",sort:!0,headerStyle:function(e,t){return{width:"80px",textAlign:"center"}}},{dataField:"label",text:"Label",headerStyle:function(e,t){return{width:"80px",textAlign:"center"}}},{dataField:"progress",text:"Progress",sort:!0,headerStyle:function(e,t){return{width:"100px",textAlign:"center"}},formatter:function(e,t){return Object(be.jsxs)("div",{children:[Object(be.jsxs)("div",{className:"text-center",children:[t.progress,"%"]}),Object(be.jsx)(je.a,{value:t.progress,color:"primary",className:"my-progress-bar-table"})]})}},{dataField:"",text:"Action",align:"left",headerStyle:function(e,t){return{width:"80px",textAlign:"center"}},formatter:function(t,s){return Object(be.jsxs)("div",{children:[Object(be.jsx)(pe.a,{color:"info",size:"sm",onClick:function(){return e.props.stageEditTask(s)},children:Object(be.jsx)("i",{className:"fa fa-pencil"})}),Object(be.jsx)(pe.a,{className:"ms-0 ms-md-1",color:"danger",size:"sm",onClick:function(){return e.toggleToast(s)},children:Object(be.jsx)("i",{className:"fa fa-trash"})})]})}}];return Object(be.jsxs)(a.Fragment,{children:[Object(be.jsx)(Ue,{toastOpen:this.state.toastOpen,toggleToast:this.toggleToast,selected:this.state.toDelete,deleteTask:this.props.deleteTask,auth:this.props.auth}),Object(be.jsx)(nt.a,{keyField:"id",data:this.props.tasks,columns:s,search:!0,className:"table-responsive",children:function(e){return Object(be.jsxs)("div",{children:[Object(be.jsx)(it,Object(l.a)(Object(l.a)({},e.searchProps),{},{className:"mb-3"})),Object(be.jsx)(st.a,Object(l.a)(Object(l.a)({},e.baseProps),{},{selectRow:t,pagination:ct()()}))]})}})]})}}]),s}(n.a.Component),lt=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).stageEditTask=function(e){var t=Object(l.a)({},e);t.label=a.props.labels.labels.filter((function(t){return t.text===e.label}))[0]?a.props.labels.labels.filter((function(t){return t.text===e.label}))[0].id:1111,t.project=a.props.projects.projects.filter((function(t){return t.title===e.project}))[0]?a.props.projects.projects.filter((function(t){return t.title===e.project}))[0].id:1111,t.comments=a.props.comments.comments.filter((function(t){return t.taskId===e.id})),a.setState(Object(l.a)(Object(l.a)(Object(l.a)({},a.state),t),{},{editing:!0})),a.toggle()},a.handleBlur=function(e){return function(t){a.setState({blur:Object(l.a)(Object(l.a)({},a.state.blur),{},Object(Be.a)({},e,!0))})}},a.state={isOpen:!1,editing:!1,title:"",project:0,label:0,priority:1,dueDate:Oe()(Oe()().add(1,"days")).format("YYYY-MM-DD"),dueTime:"",progress:0,comments:[],comment:"",blur:{title:!1,dueDate:!1}},a.toggle=a.toggle.bind(Object(ae.a)(a)),a.checkOk=a.checkOk.bind(Object(ae.a)(a)),a.stageEditTask=a.stageEditTask.bind(Object(ae.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(ae.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(ae.a)(a)),a.handleBlur=a.handleBlur.bind(Object(ae.a)(a)),a.validate=a.validate.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"checkOk",value:function(){return!(this.props.isLoading||this.props.errMsg||this.props.projects.isLoading||this.props.projects.errMsg||this.props.labels.isLoading||this.props.labels.errMsg)}},{key:"handleInputChange",value:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value,s=e.target.name;this.setState(Object(Be.a)({},s,t))}},{key:"validate",value:function(){var e={title:"",dueDate:"",btn:!1};return this.state.blur.title&&this.state.title.length<3&&(e.title="Too short! Title should contain at least 3 letters"),this.state.blur.title&&this.state.title.length>80&&(e.title="Too long! Give a short and descriptive title"),this.state.blur.title&&!this.state.title&&(e.title="Please enter a task title"),e.title&&(e.btn=!0),this.state.blur.dueDate&&!this.state.dueDate&&(e.dueDate="Please enter a due date!"),this.state.title&&this.state.dueDate||(e.btn=!0),e}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.editing)return this.props.putTask(this.state.id,this.state),void this.setState({editing:!1});this.props.postTask(this.state,this.props.auth.user.id)}},{key:"render",value:function(){var e=this;if(!this.props.auth.isLoggedIn)return Object(be.jsx)(ve.a,{to:"/login"});var t=this.validate();return Object(be.jsxs)("div",{className:"row",children:[this.props.isLoading&&Object(be.jsx)(ye,{}),this.props.errMsg&&Object(be.jsx)(ke,{msg:this.props.errMsg,type:"error"}),this.props.successMsg&&Object(be.jsx)(ke,{msg:this.props.successMsg,type:"success"}),this.props.comments.successMsg&&Object(be.jsx)(ke,{msg:this.props.comments.successMsg,type:"success"}),this.props.comments.errMsg&&Object(be.jsx)(ke,{msg:this.props.comments.errMsg,type:"error",onClick:this.props.remove}),this.checkOk()&&Object(be.jsxs)("div",{className:"col-12",children:[Object(be.jsxs)(pe.a,{className:"btn btn-success",onClick:this.toggle,children:[Object(be.jsx)("i",{className:"fa fa-plus"}),"Add Tasks"]}),Object(be.jsx)(Ve,{isOpen:this.state.isOpen,toggle:this.toggle,task:Object(l.a)({},this.state),handleInputChange:this.handleInputChange,handleSubmit:this.handleSubmit,handleBlur:this.handleBlur,errors:t,validate:this.validate,deleteComment:this.props.deleteComment}),Object(be.jsx)("hr",{}),Object(be.jsx)("h3",{children:"All Tasks"}),Object(be.jsx)(ot,{tasks:this.props.tasks,stageEditTask:function(t){return e.stageEditTask(t)},changeComplete:this.props.changeComplete,changeCompleteAll:this.props.changeCompleteAll,deleteTask:this.props.deleteTask,deleteAllTasks:this.props.deleteAllTasks,auth:this.props.auth})]})]})}}]),s}(n.a.Component),dt=s(49),pt=s.n(dt),ut=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(ae.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"handleChange",value:function(e){this.setState(Object(Be.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.loginUser(this.state)}},{key:"render",value:function(){var e=this.state,t=e.email,s=e.password;return Object(be.jsxs)(a.Fragment,{children:[this.props.auth.isLoading&&Object(be.jsx)(ye,{}),this.props.auth.isLoggedIn&&Object(be.jsx)(ve.a,{to:"/home"}),this.props.auth.errMsg&&Object(be.jsx)(ke,{msg:this.props.auth.errMsg,type:"error"}),!this.props.auth.isLoading&&!this.props.auth.isLoggedIn&&Object(be.jsxs)(Ke.a,{onSubmit:this.handleSubmit,className:"text-center",children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(ce.a,{xs:"12",md:"4",className:"mx-auto my-2",children:Object(be.jsx)(ne.a,{type:"text",name:"email",id:"email",placeholder:"Email",value:t,onChange:this.handleChange})})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(ce.a,{xs:"12",md:"4",className:"mx-auto my-2",children:Object(be.jsx)(ne.a,{type:"password",name:"password",id:"password",placeholder:"Password",value:s,onChange:this.handleChange})})}),Object(be.jsx)(pe.a,{type:"submit",color:"primary",size:"md",children:"Login"})]})]})}}]),s}(n.a.Component),jt=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(ae.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"handleChange",value:function(e){this.setState(Object(Be.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.registerUser(this.state)}},{key:"render",value:function(){var e=this.state,t=e.email,s=e.password;return Object(be.jsxs)(n.a.Fragment,{children:[this.props.auth.isRegisterLoading&&Object(be.jsx)(ye,{}),this.props.auth.isRegisterSuccess&&Object(be.jsx)(ke,{msg:"Register Success! Please Login your account.",type:"success"}),this.props.auth.registerErr&&Object(be.jsx)(ke,{msg:this.props.auth.registerErr,type:"error"}),Object(be.jsxs)(Ke.a,{onSubmit:this.handleSubmit,className:"text-center",children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(ce.a,{xs:"12",md:"4",className:"mx-auto my-2",children:Object(be.jsx)(ne.a,{type:"text",name:"email",id:"email",placeholder:"Email",value:t,onChange:this.handleChange})})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(ce.a,{xs:"12",md:"4",className:"mx-auto my-2",children:Object(be.jsx)(ne.a,{type:"password",name:"password",id:"password",placeholder:"Password",value:s,onChange:this.handleChange})})}),Object(be.jsx)(pe.a,{type:"submit",color:"primary",size:"md",children:"Register"})]})]})}}]),s}(n.a.Component),ht=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(){return Object($.a)(this,s),t.apply(this,arguments)}return Object(ee.a)(s,[{key:"render",value:function(){return this.props.auth.isLoggedIn?Object(be.jsxs)("div",{children:["Hello ",this.props.auth.user.email]}):Object(be.jsx)(ve.a,{to:"/home"})}}]),s}(n.a.Component),bt=Object(ve.g)(ht),mt=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(){return Object($.a)(this,s),t.apply(this,arguments)}return Object(ee.a)(s,[{key:"render",value:function(){return this.props.logoutUser(),Object(be.jsx)(ve.a,{to:"/home"})}}]),s}(n.a.Component),gt=function(e){return Object(be.jsxs)(ze.a,{isOpen:e.isOpen,toggle:function(){return e.toggle()},className:"modal-md",children:[Object(be.jsxs)("div",{className:"modal-header",children:[Object(be.jsxs)("h5",{className:"modal-title",children:["Add New ","project"===e.type?"Project":"Label"]}),Object(be.jsx)("button",{className:"btn-close",type:"button",onClick:function(){return e.toggle()}})]}),Object(be.jsx)(Je.a,{children:Object(be.jsx)(Ke.a,{id:"my-form",onSubmit:e.handleSubmit,children:Object(be.jsxs)(We.a,{row:!0,className:"mt-3",children:[Object(be.jsx)(Ge.a,{for:"title",sm:2,children:"project"===e.type?"Project title":"Label title"}),Object(be.jsx)(ce.a,{sm:10,children:Object(be.jsx)(ne.a,{type:"text",name:"title",placeholder:"project"===e.type?"Eg. Frontend development":"Eg. Important",onChange:e.handleInputChange})})]})})}),Object(be.jsxs)(qe.a,{children:[Object(be.jsx)(pe.a,{className:"btn btn-danger",onClick:function(){return e.toggle()},children:"Cancel"}),Object(be.jsx)(pe.a,{className:"btn btn-primary",type:"submit",form:"my-form",onClick:function(){return e.toggle()},children:"Save"})]})]})},Ot=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).state={isOpen:!1,type:""},a.toggle=a.toggle.bind(Object(ae.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(ae.a)(a)),a.handleChange=a.handleChange.bind(Object(ae.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(ae.a)(a)),a}return Object(ee.a)(s,[{key:"toggle",value:function(e){this.setState({isOpen:!this.state.isOpen})}},{key:"handleInputChange",value:function(e){var t=e.target.value,s=e.target.name;this.setState(Object(Be.a)({},s,t))}},{key:"handleChange",value:function(e){var t=e.target.value,s=e.target.name;this.setState(Object(Be.a)({},s,t))}},{key:"handleSubmit",value:function(e){e.preventDefault(),"project"===this.state.type?this.props.postNewProjectOrLabel(this.props.auth.user.id,"projects",this.state.title):this.props.postNewProjectOrLabel(this.props.auth.user.id,"labels",this.state.title)}},{key:"render",value:function(){var e=this;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(gt,{isOpen:this.state.isOpen,type:this.state.type,toggle:this.toggle,handleSubmit:this.handleSubmit,handleInputChange:this.handleInputChange}),Object(be.jsx)("div",{className:"container",children:Object(be.jsxs)("div",{className:"row d-flex-justify-content-between",children:[Object(be.jsxs)("ul",{className:"col-md-4 offset-md-2 lb-pj-list p-3",children:[Object(be.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(be.jsx)("h3",{children:"Projects"})," ",Object(be.jsx)(pe.a,{onClick:function(){e.toggle("project"),e.setState({type:"project"})},children:"Add new Project"})]}),this.props.projects.projects.map((function(t){return Object(be.jsxs)("li",{className:"lb-pj-list-item my-2 p-3",children:[Object(be.jsxs)("div",{className:"d-flex justify-content-between ",children:[Object(be.jsx)("span",{id:"pj"+t.id.toString()+t.title,style:{display:"block"},children:t.title}),Object(be.jsx)("input",{type:"text",name:"editTitle",value:e.state.editTitle,id:"pj"+t.id,style:{display:"none"},onChange:e.handleChange,autoFocus:!0}),Object(be.jsxs)("div",{children:[Object(be.jsx)("button",{id:"pj"+t.title+t.id.toString(),className:"btn btn-primary btn-sm me-2",onClick:function(){"block"===document.getElementById("pj"+t.id.toString()+t.title).style.display?(document.getElementById("pj"+t.id).style.display="block",document.getElementById("pj"+t.id.toString()+t.title).style.display="none",document.getElementById("pj"+t.title+t.id.toString()).children[0].classList.remove("fa-pencil"),document.getElementById("pj"+t.title+t.id.toString()).children[0].classList.add("fa-check"),document.getElementById("pj"+t.title+t.id.toString()).classList.remove("btn-primary"),document.getElementById("pj"+t.title+t.id.toString()).classList.add("btn-success"),e.setState({editTitle:t.title})):(document.getElementById("pj"+t.id.toString()+t.title).style.display="block",document.getElementById("pj"+t.id).style.display="none",document.getElementById("pj"+t.title+t.id.toString()).children[0].classList.remove("fa-check"),document.getElementById("pj"+t.title+t.id.toString()).children[0].classList.add("fa-pencil"),document.getElementById("pj"+t.title+t.id.toString()).classList.remove("btn-success"),document.getElementById("pj"+t.title+t.id.toString()).classList.add("btn-primary"),e.props.editProject(e.props.auth.user.id,t.id,e.state.editTitle,t.createdAt))},children:Object(be.jsx)("i",{className:"fa fa-pencil"})}),Object(be.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.props.deleteProjectOrLabel(e.props.auth.user.id,t.id,"projects")},children:Object(be.jsx)("i",{className:"fa fa-trash"})})]})]}),Object(be.jsxs)("p",{className:"mb-0",children:["created - ",Oe()(t.createdAt).format("MMM Do YY")]}),t.updatedAt?Object(be.jsx)("p",{className:"mt-0",children:"updated - "+Oe()(t.updatedAt).format("MMM Do YY")}):""]},t.id)}))]}),Object(be.jsxs)("ul",{className:"col-md-4 ms-0 ms-md-5 p-3 lb-pj-list p-3",children:[Object(be.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(be.jsx)("h3",{children:"Labels"}),Object(be.jsx)(pe.a,{onClick:function(){e.toggle("label"),e.setState({type:"label"})},children:"Add new Label"})]}),this.props.labels.labels.map((function(t){return Object(be.jsxs)("li",{className:"lb-pj-list-item my-2 p-3",children:[Object(be.jsxs)("div",{className:"d-flex justify-content-between ",children:[Object(be.jsx)("span",{id:"lb"+t.id.toString()+t.text,style:{display:"block"},children:t.text}),Object(be.jsx)("input",{type:"text",name:"editText",value:e.state.editText,id:"lb"+t.id,style:{display:"none"},onChange:e.handleChange,autoFocus:!0}),Object(be.jsxs)("div",{children:[Object(be.jsx)("button",{id:"lb"+t.text+t.id.toString(),className:"btn btn-primary btn-sm me-2",onClick:function(){"block"===document.getElementById("lb"+t.id.toString()+t.text).style.display?(document.getElementById("lb"+t.id).style.display="block",document.getElementById("lb"+t.id.toString()+t.text).style.display="none",document.getElementById("lb"+t.text+t.id.toString()).children[0].classList.remove("fa-pencil"),document.getElementById("lb"+t.text+t.id.toString()).children[0].classList.add("fa-check"),document.getElementById("lb"+t.text+t.id.toString()).classList.remove("btn-primary"),document.getElementById("lb"+t.text+t.id.toString()).classList.add("btn-success"),e.setState({editText:t.text})):(document.getElementById("lb"+t.id.toString()+t.text).style.display="block",document.getElementById("lb"+t.id).style.display="none",document.getElementById("lb"+t.text+t.id.toString()).children[0].classList.remove("fa-check"),document.getElementById("lb"+t.text+t.id.toString()).children[0].classList.add("fa-pencil"),document.getElementById("lb"+t.text+t.id.toString()).classList.remove("btn-success"),document.getElementById("lb"+t.text+t.id.toString()).classList.add("btn-primary"),e.props.editLabel(e.props.auth.user.id,t.id,e.state.editText,t.createdAt))},children:Object(be.jsx)("i",{className:"fa fa-pencil"})}),Object(be.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.props.deleteProjectOrLabel(e.props.auth.user.id,t.id,"labels")},children:Object(be.jsx)("i",{className:"fa fa-trash"})})]})]}),Object(be.jsxs)("p",{className:"mb-0",children:["created - ",Oe()(t.createdAt).format("MMM Do YY")]}),t.updatedAt?Object(be.jsx)("p",{className:"mt-0",children:"updated - "+Oe()(t.updatedAt).format("MMM Do YY")}):""]},t.id)}))]})]})})]})}}]),s}(n.a.Component),ft=s(129),xt=s(16),yt=s.n(xt),kt="https://me-to-do-list.herokuapp.com/api",vt=function(e){return function(t){return console.log("USERID IS "+e),t(Et()),yt.a.get(kt+"/tasks").then((function(s){yt.a.get(kt+"/projects",{params:{userId:e}}).then((function(a){t(Kt(a.data)),yt.a.get(kt+"/labels",{params:{userId:e}}).then((function(n){t(Ut(n.data)),t(Dt(St(s.data.filter((function(t){return t.userId===e})),a.data,n.data)))})).catch((function(e){t(At(e.message))}))})).catch((function(e){t(At(e.message))}))})).catch((function(e){t(At(e.message))}))}},St=function(e,t,s){return e.map((function(e){var a=e;return a.project=t.filter((function(t){return t.id===e.project}))[0]?t.filter((function(t){return t.id===e.project}))[0].title:"Project not chosen",a.label=s.filter((function(t){return t.id===e.label}))[0]?s.filter((function(t){return t.id===e.label}))[0].text:"Label not chosen",a}))},Ct=function(e){return{type:j,payload:"New task created : "+e.title}},Nt=function(e){return{type:h,payload:e}},Lt=function(e){return{type:b,payload:"Updated task : "+e.title}},Tt=function(e){return{type:m,payload:e}},Mt=function(){return{type:g,payload:"Deleted successfully!"}},It=function(e){return{type:O,payload:e}},Et=function(){return{type:d}},Dt=function(e){return{type:p,payload:e}},At=function(e){return{type:u,payload:e}},wt=function(){return function(e){return e(Pt()),yt.a.get(kt+"/comments").then((function(t){e(Bt(t.data))})).catch((function(t){e(_t(t.message))}))}},Pt=function(){return{type:k}},Bt=function(e){return{type:v,payload:e}},_t=function(e){return{type:S,payload:e}},Ft=function(){return{type:C,payload:"New comment is posted"}},Rt=function(e){return function(t){return t(Yt()),yt.a.get(kt+"/labels",{params:{userId:e}}).then((function(e){t(Ut(e.data))})).catch((function(e){t(Gt(e.message))}))}},Yt=function(){return{type:N}},Ut=function(e){return console.log("ADDING LABELS"),{type:L,payload:e}},Gt=function(e){return{type:T,payload:e}},zt=function(e){return function(t){return t(Jt()),yt.a.get(kt+"/projects",{params:{userId:e}}).then((function(e){t(Kt(e.data))})).catch((function(e){t(Wt(e.message))}))}},Jt=function(){return{type:E}},Kt=function(e){return{type:D,payload:e}},Wt=function(e){return{type:A,payload:e}},Ht=function(e){return{type:w,payload:e}},qt=function(e){return function(t){return yt.a.get(kt+"/users",{params:{email:e.email}}).then((function(s){if(0===s.data.length)t(Zt("Account with your email does not exist! Please register first!"));else if(pt.a.AES.decrypt(s.data[0].password,"123").toString(pt.a.enc.Utf8)===e.password){var a=dt.AES.encrypt(JSON.stringify(e),"123").toString();localStorage.setItem("token",a),t(vt(s.data[0].id)),t(Vt(s.data[0]))}else t(Zt("Check your email or password"))})).catch((function(e){t(Zt(e.message))}))}},Qt=function(){return{type:R}},Vt=function(e){return{type:Y,payload:e}},Xt=function(){return{type:G}},Zt=function(e){return{type:U,payload:e}},$t=function(e){return{type:_,payload:e}},es=function(e){return{type:F,payload:e}},ts=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(){return Object($.a)(this,s),t.apply(this,arguments)}return Object(ee.a)(s,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.loginWithToken(e)}},{key:"render",value:function(){var e=this;return Object(be.jsxs)("div",{children:[Object(be.jsx)(Pe,{auth:this.props.auth}),Object(be.jsx)("div",{className:"container my-5 pt-5",children:Object(be.jsxs)(ve.d,{children:[Object(be.jsx)(ve.b,{path:"/home",component:function(){return Object(be.jsx)(Ce,{tasks:e.props.tasks,isLoading:e.props.tasks.isLoading,errMsg:e.props.tasks.errMsg,successMsg:e.props.tasks.successMsg,comments:e.props.comments,projects:e.props.projects,labels:e.props.labels,auth:e.props.auth,fetchTasks:e.props.fetchTasks,changeFilter:e.props.changeFilter,changeSort:e.props.changeSort,changeSortOrder:e.props.changeSortOrder,changeComplete:e.props.changeComplete})}}),Object(be.jsx)(ve.b,{exact:!0,path:"/tasks",component:function(){return Object(be.jsx)(lt,{tasks:e.props.tasks.tasks,isLoading:e.props.tasks.isLoading,errMsg:e.props.tasks.errMsg,successMsg:e.props.tasks.successMsg,projects:e.props.projects,labels:e.props.labels,comments:e.props.comments,auth:e.props.auth,postTask:e.props.postTask,putTask:e.props.putTask,deleteComment:e.props.deleteComment,changeComplete:e.props.changeComplete,changeCompleteAll:e.props.changeCompleteAll,deleteTask:e.props.deleteTask,deleteAllTasks:e.props.deleteAllTasks})}}),Object(be.jsx)(ve.b,{path:"/tasks/:taskId",component:function(t){var s=t.match,a=(t.location,t.history),n=parseInt(s.params.taskId,10);return Object(be.jsx)($e,{task:e.props.tasks.tasks.filter((function(e){return e.id===n}))[0],history:a,auth:e.props.auth,putTask:e.props.putTask,labels:e.props.labels,projects:e.props.projects,isLoading:e.props.tasks.isLoading,errMsg:e.props.tasks.errMsg,successMsg:e.props.tasks.successMsg,deleteComment:e.props.deleteComment,deleteTask:e.props.deleteTask,changeComplete:e.props.changeComplete})}}),Object(be.jsx)(ve.b,{path:"/projects",component:function(){return Object(be.jsx)(Ot,{projects:e.props.projects,labels:e.props.labels,postNewProjectOrLabel:e.props.postNewProjectOrLabel,editProject:e.props.editProject,editLabel:e.props.editLabel,deleteProjectOrLabel:e.props.deleteProjectOrLabel,auth:e.props.auth})}}),Object(be.jsx)(ve.b,{path:"/labels",component:function(){return Object(be.jsx)(Ot,{projects:e.props.projects,labels:e.props.labels,postNewProjectOrLabel:e.props.postNewProjectOrLabel,editProject:e.props.editProject,editLabel:e.props.editLabel,deleteProjectOrLabel:e.props.deleteProjectOrLabel,auth:e.props.auth})}}),Object(be.jsx)(ve.b,{exact:!0,path:"/login",component:function(){return Object(be.jsx)(ut,{auth:e.props.auth,loginUser:e.props.loginUser})}}),Object(be.jsx)(ve.b,{exact:!0,path:"/register",component:function(){return Object(be.jsx)(jt,{registerUser:e.props.registerUser,auth:e.props.auth})}}),Object(be.jsx)(ve.b,{exact:!0,path:"/profile",component:function(){return Object(be.jsx)(bt,{auth:e.props.auth})}}),Object(be.jsx)(ve.b,{exact:!0,path:"/logout",component:function(){return Object(be.jsx)(mt,{logoutUser:e.props.logoutUser})}}),Object(be.jsx)(ve.a,{to:"/home"})]})})]})}}]),s}(n.a.Component),ss=Object(ve.g)(Object(Z.b)((function(e){return{tasks:e.tasks,comments:e.comments,projects:e.projects,labels:e.labels,auth:e.auth}}),(function(e){return{fetchTasks:function(t){return e(vt(t))},fetchComments:function(){return e(wt())},fetchLabels:function(t){return e(Rt(t))},fetchProjects:function(t){return e(zt(t))},loginUser:function(t){return e(function(e){return function(t){t(Qt()),t(wt()),t(qt(e))}}(t))},loginWithToken:function(t){return e(function(e){return function(t){var s=dt.AES.decrypt(e,"123"),a=JSON.parse(s.toString(pt.a.enc.Utf8));t(Qt()),t(wt()),t(qt(a))}}(t))},registerUser:function(t){return e(function(e){return function(t){return yt.a.get(kt+"/users",{params:{email:e.email}}).then((function(s){if(s.data.length<1)return yt.a.post(kt+"/users",{email:e.email,password:dt.AES.encrypt(e.password,"123").toString()}).then((function(e){t($t())})).catch((function(e){t(es("Register Failed!"))}));t(es("Email has alrealy been used!"))})).catch((function(e){t(es("Register Failed!"))}))}}(t))},logoutUser:function(){return e((function(e){localStorage.removeItem("token"),e(Xt())}))},postTask:function(t,s){return e(function(e,t){return function(s){return yt.a.post(kt+"/tasks",{userId:t,title:e.title,dueDate:e.dueDate,dueTime:e.dueTime,progress:0,priority:+e.priority,label:+e.label,project:+e.project}).then((function(a){201===a.status&&(""!==e.comment?yt.a.post(kt+"/comments",{taskId:a.data.id,text:e.comment,date:Oe()()}).then((function(a){s(wt()),s(vt(t)),s(Ct(e))})).catch((function(e){console.log(e)})):(s(wt()),s(vt(t)),s(Ct(e))))})).catch((function(e){s(Nt(e.message))}))}}(t,s))},putTask:function(t,s,a,n){return e(function(e,t){return function(s){return yt.a.put(kt+"/tasks/".concat(e),{userId:t.userId,title:t.title,dueDate:t.dueDate,dueTime:t.dueTime,progress:+t.progress,priority:+t.priority,label:+t.label,project:+t.project}).then((function(e){200===e.status&&(""!==t.comment?yt.a.post(kt+"/comments",{taskId:e.data.id,text:t.comment,date:Oe()()}).then((function(e){s(wt()),s(vt(t.userId)),s(Ft())})).catch((function(e){console.log(e)})):(s(wt()),s(vt(t.userId)),s(Lt(t))))})).catch((function(e){s(Tt(e.message))}))}}(t,s))},deleteComment:function(t){return e(function(e){return function(t){return yt.a.delete(kt+"/comments/".concat(e)).then((function(e){console.log("Deleted comment with id"+e.data),t(wt())})).catch((function(e){console.log(e.message)}))}}(t))},deleteTask:function(t,s){return e(function(e,t){return function(s){return yt.a.delete(kt+"/tasks/".concat(e)).then((function(e){s(wt()),s(vt(t)),s(Mt())})).catch((function(e){s(It(e.message))}))}}(t,s))},deleteAllTasks:function(t){return e(function(e){return function(t){if(console.log("Deleting all "+JSON.stringify(e)),e.isLoggedIn)return yt.a.delete(kt+"/users/".concat(e.user.id)).then((function(s){yt.a.post(kt+"/users",{email:e.user.email,password:e.user.password}).then((function(e){console.log(e),t(wt()),t(vt(e.data.id)),t(Mt())})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)}))}}(t))},postNewProjectOrLabel:function(t,s,a){return e(function(e,t,s){return function(a){return"projects"===t?yt.a.post(kt+"/projects",{title:s,createdAt:Oe()(),userId:e}).then((function(t){a(Ht("New Project "+s+"is created")),a(zt(e))})).catch((function(e){a(Ht(e.message))})):yt.a.post(kt+"/labels",{text:s,createdAt:Oe()(),userId:e}).then((function(t){a(Ht("New Label "+s+"is created")),a(Rt(e))})).catch((function(e){a(Ht(e.message))}))}}(t,s,a))},changeFilter:function(t){return e(function(e){return{type:f,payload:e}}(t))},changeSort:function(t){return e(function(e){return{type:x,payload:e}}(t))},changeSortOrder:function(t){return e(function(e){return{type:y,payload:e}}(t))},editProject:function(t,s,a,n){return e(function(e,t,s,a){return function(n){return yt.a.put(kt+"/projects/".concat(t),{title:s,updatedAt:Oe()(),createdAt:a,userId:e}).then((function(t){n(zt(e))})).catch((function(e){console.log(e)}))}}(t,s,a,n))},editLabel:function(t,s,a,n){return e(function(e,t,s,a){return function(n){return yt.a.put(kt+"/labels/".concat(t),{text:s,updatedAt:Oe()(),createdAt:a,userId:e}).then((function(t){n(Rt(e))})).catch((function(e){console.log(e)}))}}(t,s,a,n))},deleteProjectOrLabel:function(t,s,a){return e(function(e,t,s){return function(a){return yt.a.delete(kt+"/".concat(s,"/").concat(t)).then((function(t){a("projects"===s?zt(e):Rt(e))})).catch((function(e){console.log(e)}))}}(t,s,a))},changeComplete:function(t){return e(function(e){return function(t){return yt.a.put(kt+"/tasks/".concat(e.id),Object(l.a)({},e)).then((function(s){t(vt(e.userId))})).catch((function(e){console.log(e)}))}}(t))},changeCompleteAll:function(t,s,a){return e(function(e,t,s){return function(a){var n=e.slice(1),r=e[0];return yt.a.put(kt+"/tasks/".concat(r.id),Object(l.a)(Object(l.a)({},r),{},{isComplete:s})).then((function(e){if(s){var t,a=Object(ft.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;yt.a.put(kt+"/tasks/".concat(r.id),Object(l.a)(Object(l.a)({},r),{},{isComplete:!0})).then((function(e){})).catch((function(e){return console.log(e.message)}))}}catch(d){a.e(d)}finally{a.f()}}else{var c,i=Object(ft.a)(n);try{for(i.s();!(c=i.n()).done;){var o=c.value;yt.a.put(kt+"/tasks/".concat(o.id),Object(l.a)(Object(l.a)({},o),{},{isComplete:!1})).then((function(e){})).catch((function(e){return console.log(e.message)}))}}catch(d){i.e(d)}finally{i.f()}}})).catch((function(e){console.log(e)})).finally((function(){a(vt(t))}))}}(t,s,a))}}}))(ts));var as=function(){return Object(be.jsx)(Z.a,{store:X,children:Object(be.jsx)(i.a,{children:Object(be.jsx)(ss,{})})})},ns=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,497)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))};c.a.render(Object(be.jsx)(as,{}),document.getElementById("root")),ns()}},[[465,1,2]]]);
//# sourceMappingURL=main.7d16ef90.chunk.js.map